# Unbind all keys
unbind-key -a

# My prefix is Ctrl-s
set -g prefix 'C-s'

set-option -g default-shell /bin/zsh
set-option -g default-command "reattach-to-user-namespace -l zsh"

bind-key          '{' swap-pane -U
bind-key          '}' swap-pane -D
bind-key          '#' list-buffers
bind-key          '$' command-prompt 'rename-session %%'
bind-key          ',' command-prompt 'rename-window %%'
bind-key          '.' command-prompt "move-window -t '%%'"
bind-key          '1' select-window -t :1
bind-key          '2' select-window -t :2
bind-key          '3' select-window -t :3
bind-key          '4' select-window -t :4
bind-key          '5' select-window -t :5
bind-key          '6' select-window -t :6
bind-key          '7' select-window -t :7
bind-key          '8' select-window -t :8
bind-key          '9' select-window -t :9
bind-key          ':' command-prompt
bind-key          '\;' last-pane
bind-key          '=' choose-buffer
bind-key          '?' list-keys
bind-key          '[' copy-mode
bind-key          ']' paste-buffer
bind-key          'c' new-window -c "#{pane_current_path}"
bind-key          'd' detach-client
bind-key          'f' command-prompt "find-window '%%'"
bind-key          'h' select-pane -L
bind-key          'j' select-pane -D
bind-key          'k' select-pane -U
bind-key          'l' select-pane -R
bind-key          'n' next-window
bind-key          'o' select-pane -t :.+
bind-key          'p' previous-window
bind-key          'R' send-keys -R
bind-key          'r' source-file ~/.tmux.conf
bind-key          's' split-window -v -c "#{pane_current_path}"
bind-key          't' clock-mode
bind-key          'v' split-window -h -c "#{pane_current_path}"
bind-key          'w' choose-window
bind-key          'x' confirm-before -p "kill-pane #P? (y/n)" kill-pane
bind-key          'z' resize-pane -Z
bind-key        Space next-layout
bind-key -r      M-Up resize-pane -U 5
bind-key -r    M-Down resize-pane -D 5
bind-key -r    M-Left resize-pane -L 5
bind-key -r   M-Right resize-pane -R 5
bind-key -n    S-Left previous-window
bind-key -n   S-Right next-window
bind-key -t vi-copy y copy-pipe 'xclip -in -selection clipboard'

#bind-key -n       C-x clear-history\; send-keys 'C-z'\; send-keys 'C-l'\; send-keys 'Enter'\; send-keys 'C-l'\; send-keys 'fg'\; send-keys 'Enter'\; send-keys 'C-l'\; clear-history
#bind-key -n       C-x clear-history
#bind-key        C-b send-prefix
#bind-key        C-o rotate-window
#bind-key        C-z suspend-client
#bind-key          ! break-pane
#bind-key          " split-window
#bind-key          % split-window -h
#bind-key          & confirm-before -p "kill-window #W? (y/n)" kill-window
#bind-key          ' command-prompt -p index "select-window -t ':%%'"
#bind-key          ( switch-client -p
#bind-key          ) switch-client -n
#bind-key          - delete-buffer
#bind-key          0 select-window -t :0
#bind-key          D choose-client
#bind-key          H resize-pane -L 5
#bind-key          J resize-pane -D 5
#bind-key          K resize-pane -U 5
#bind-key          L resize-pane -R 5
#bind-key          d detach-client
#bind-key          i display-message
#bind-key          q display-panes
#bind-key          r source-file /Users/darrinholst/.tmux.conf
#bind-key          ~ show-messages
#bind-key      PPage copy-mode -u
#bind-key -r      Up select-pane -U
#bind-key -r    Down select-pane -D
#bind-key -r    Left select-pane -L
#bind-key -r   Right select-pane -R
#bind-key        M-1 select-layout even-horizontal
#bind-key        M-2 select-layout even-vertical
#bind-key        M-3 select-layout main-horizontal
#bind-key        M-4 select-layout main-vertical
#bind-key        M-5 select-layout tiled
#bind-key        M-h resize-pane -L
#bind-key -n     M-h select-pane -L
#bind-key        M-j resize-pane -D
#bind-key -n     M-j select-pane -D
#bind-key        M-k resize-pane -U
#bind-key -n     M-k select-pane -U
#bind-key -n     M-l select-pane -R
#bind-key        M-l resize-pane -R
#bind-key        M-n next-window -a
#bind-key        M-o rotate-window -D
#bind-key        M-p previous-window -a
#bind-key -n    M-Up select-pane -U
#bind-key -n  M-Down select-pane -D
#bind-key -n  M-Left select-pane -L
#bind-key -n M-Right select-pane -R
#bind-key -r    C-Up resize-pane -U
#bind-key -r  C-Down resize-pane -D
#bind-key -r  C-Left resize-pane -L
#bind-key -r C-Right resize-pane -R

# 0 is too far from 1
set -g base-index 1

# Automatically set window title
set-window-option -g automatic-rename on
set-option -g set-titles on

set -g status-keys vi
set -g history-limit 1000000

setw -g mode-keys vi
setw -g monitor-activity on

# No delay for escape key press
set -sg escape-time 0

# mouse scroll buffer outside copy mode
set -g terminal-overrides 'xterm*:smcup@:rmcup@'

set -g mouse on
bind -n WheelUpPane if-shell -F -t = "#{mouse_any_flag}" "send-keys -M" "if -Ft= '#{pane_in_mode}' 'send-keys -M' 'copy-mode -e; send-keys -M'"

# need this to autosave in vim on lost focus
set -g focus-events on

# status bar
if-shell "test -f /usr/local/lib/python2.7/site-packages/powerline/bindings/tmux/powerline.conf" "source /usr/local/lib/python2.7/site-packages/powerline/bindings/tmux/powerline.conf"
if-shell "test -f ~/.tmuxline.conf" "source ~/.tmuxline.conf"

set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-copycat'
set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'tmux-plugins/tmux-open'

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'

bind-key 'y' save-buffer ~/.tmux-buffer \; run-shell "cat ~/.tmux-buffer | pbcopy"
